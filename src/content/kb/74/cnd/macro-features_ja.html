<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta name="author" content="Nikolay.Krasilnikov@oracle.com">
<meta name="description" content="A short guide to macro features in C/C++ projects in 
      NetBeans IDE or Oracle Solaris Studio IDE.">
<meta name="keywords" content="NetBeans, IDE, macros,
            tutorial, guide, user, documentation, open source, C, C++, make, dbx, gdb">
        <link rel="stylesheet" type="text/css" href="../../../netbeans.css">
        <title>C/C++プロジェクトのマクロについて - NetBeans IDEチュートリアル</title>
</head>

    <body style="padding: 2px;">
<h1>C/C++プロジェクトのマクロについて - NetBeans IDEチュートリアル</h1>
      <div class="articledate" style="margin-left: 0px;font-style:italic;">
   <p><em>執筆: <a href="mailto:Nikolay.Krasilnikov@oracle.com"><i>Nikolay Krasilnikov</i></a><br> 2013年10月</em> [リビジョン番号: V7.4-1]</div>
<p>このチュートリアルでは、NetBeans IDEの新機能を使用し、マクロを含むコードを検査およびデバッグする方法を示します。</p>

<p><b>目次</b></p>
<img alt="このページの内容は、NetBeans IDE 7.3および7.4に適用されます" class="stamp" src="../../../images_www/articles/73/netbeans-stamp-74-73.png" title="このページの内容は、NetBeans IDE 7.3および7.4に適用されます">

      <ul class="toc">
         <li><a href="#requirements">要件</a></li>
         <li><a href="#investigate">マクロを使用するコードの検査</a></li>
         <li><a href="#debug">マクロを使用するコードのデバッグ</a></li>
         
      </ul>


<h2><a name="requirements"></a>要件</h2>
<p><b>このチュートリアルに従うには、次のソフトウェアとリソースが必要です。</b> </p>

<table>
    <tbody>
    <tr>
        <th class="tblheader" scope="col">ソフトウェアまたはリソース</th>
        <th class="tblheader" scope="col">必須バージョン</th>
    </tr>
    <tr>
        <td class="tbltd1">NetBeans IDE</td>
        <td class="tbltd1"><a href="https://netbeans.org/downloads/index.html">バージョン7.3または7.4とNetBeans C/C++プラグイン</a></td>
    </tr>
    <tr>
        <td class="tbltd1">Java Developer Kit (JDK)</td>
        <td class="tbltd1"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">バージョン6または7</a></td>
    </tr>
</table>
<p>必要なソフトウェアのダウンロードとインストールについては、<a href="../../../community/releases/74/install.html">NetBeans IDEのインストール手順</a>および<a HREF="../../../community/releases/74/cpp-setup-instructions.html">C/C++/Fortran向けのNetBeans IDEの構成</a>を参照してください。<br>
</p>
    <h2><a name="investigate"></a>マクロを使用するコードの検査</h2>
    <p>マクロはハイパーリンクされているため、[Ctrl]を押しながらクリックすると、IDEはマクロが定義されているヘッダー・ファイルを開きます。ただし、定数やリテラルのような単純なマクロの場合は、単にマクロ定義を見るだけのこともあります。</p>
    <p>
        NetBeans IDEは、マクロを含むソース・コードを迅速に調べるために使用できる、2つの機能を提供します。</p>
        <ul>
           <li>マクロ・ツールチップ。短くて単純なマクロの場合に便利です。</li>
           <li>「マクロの展開」ウィンドウ。より複雑なマクロの場合に便利です。</li>
        </ul>
    <h3><a name="tooltips"></a>マクロ・ツールチップを使用した単純なマクロの操作</h3>
    <p>マクロ用のツールチップでは、別のファイルを開くことなく、小さなポップアップを表示できます。
     </p>


<p><b>展開が表示されるようにマクロ・ツールチップをアクティブ化するには:</b></p>
<ol><li>[Ctrl]+[Alt]を押したままにします。</li>
<li>展開するマクロの上にマウス・カーソルを置くと、次の図に示すとおり、ツールチップが開いて展開された情報が表示されます。</li>
</ol>    
    <P><img SRC="../../../images_www/articles/73/cnd/macros/macro-tooltip.png" alt="マクロ・ツールチップの展開" class="b-all margin-around"></P>
   

    <h3>「マクロの展開」ウィンドウを使用した複雑なマクロの操作</h3>
    <p>
        マクロの展開表示を使用すると、複数の行からなる複雑なマクロを持つソース・コードを検査できます。マクロは定数の定義に使用されることがよくありますが、関数のように使用できるコード・フラグメントの定義にも使用されます。この方法で、マクロを使用するコードを操作する場合、コード内で起こることを把握するのが困難な場合があります。マクロをコールするソース・コードを使用して、コンテキスト内のマクロを調査する必要が生じることがあります。
    </p>
    <p><b>マクロ・コードを展開した状態でソース・コードを表示すには:</b></p>
    <ul>
        <li>マクロを右クリックし、ポップアップ・メニューから「ナビゲート」>「展開されたマクロを表示」を選択します。<br>「マクロの展開」ウィンドウが開き、マクロをコールするコードのコンテキスト内で、展開されたマクロが表示されます。</li>
       <li>[Ctrl]+[Alt]を押しながら目的のコードにマウス・ポインタを置き、ハイパーリンクをクリックして「マクロの展開」ウィンドウを開くこともできます。</li>
       </ul>
    <p>次の図は、「マクロの展開」ウィンドウを示しています。</p>
    <p>
        <img SRC="../../../images_www/articles/73/cnd/macros/macro-expansion.png" alt="マクロの展開表示" class="b-all margin-around">
    </p>
    <p>
        「マクロの展開」ウィンドウでは、マクロのコンテキストは保護されたブロック内に配置されています。展開されたコードには意味解釈の強調表示が用意されています。「マクロの展開」ウィンドウのハイパーリンクを使用して、他のソース・ファイルに移動できます。マクロのパラメータ使用状況にも強調表示があります。
    </p>
    <p>
        「マクロの展開」ウィンドウの左の列に、次のようないくつかのツールバー・ボタンが表示されます。</p>
        <ul>
            <li>キャレット、内容、およびコンテキストを同期<br>このオプションを使用すると、ソース・ファイルのキャレット位置と内容が「エディタ」ウィンドウおよび「マクロの展開」ウィンドウで同期します。<br>また、「ローカル・コンテキストのみ展開」が選択されている場合、キャレット位置と関連付けるようにコンテキストが変更されます。
            </li><li>ローカル・コンテキストのみ展開。キャレットのあるコード・ブロック内のマクロのみが、「マクロの展開」ウィンドウで展開されます。
            </li>
            <li>ファイル全体に渡って展開<br>ソース・ファイル内のすべてのマクロが「マクロの展開」ウィンドウで展開されます。
            </li>
            <li>上/下矢印<br>これらのボタンは、次のマクロ、または前のマクロにすばやく移動するために使用できます。</li>
        </ul>
       
    <h2><a name="debug"></a>マクロを使用するコードのデバッグ</h2>
    <p>
        マクロの意味を理解しても、十分でないことがあります。<br>たとえば、次のコードをデバッグしていると想定します。
    </p>
<pre>#include &lt;stdlib.h&gt;
#include &lt;iostream&gt;

#define ID_FIRST (0)
#define ID_ALICE (ID_FIRST)
#define ID_BOB (ID_ALICE + 1)
#define ID_TOM (ID_BOB + 1)
#define ID_FRINDS_NUMBER (ID_TOM + 1)

#define NEXT_PERSON(id) (id + 1)
#define PREV_PERSON(id) (id - 1)

using namespace std;

/*
* Main function
*/
int main(int argc, char** argv) {
int person = ID_TOM;
if (NEXT_PERSON(person) == ID_FRINDS_NUMBER) {
cout &lt;&lt; "last person";
}
return (EXIT_SUCCESS);
}
</pre>
    <p>
        デバッガを<tt>if</tt>文で停止し、プログラムが「last person」の値を出力するかどうかを確認するとします。
    </p>
    <p>
        マクロの展開ツールチップに、<tt>ID_FRINDS_NUMBER</tt>が「<tt>(((((0))+1)+1)+1)</tt>」であることが表示されます。<br><tt>ID_FRINDS_NUMBER</tt>はいくつになるでしょうか。この単純な例では<tt>ID_FRINDS_NUMBER</tt>の値は3であることが容易にわかりますが、2000人だった場合はこれほど簡単ではないはずです。
    </p>
    <p>後述のように、デバッグの際にマクロの式を評価することが役に立つ場合があります。</p>
    <h3>ツールチップを使用したマクロの評価</h3>
    <p>
        デバッガでマクロのある式で式の評価を使用できます。<br><tt>ID_FRINDS_NUMBER</tt>の上にマウス・ポインタを置くと、次の図のように示されます。<br>
    </p>
    <p>
    <img SRC="../../../images_www/articles/73/cnd/macros/macro-debugging-expression-evaluation.png" alt="マクロの式の評価" class="b-all margin-around">
    </p>
    <p>
        式全体を選択してその上にマウス・ポインタを置き、次の図のようにツールチップ内の式を評価することもできます。<br>
    </p>
    <p>
        <img SRC="../../../images_www/articles/73/cnd/macros/macro-debugging-expression-evaluation-2.png" alt="マクロの式の評価" class="b-all margin-around">
</p>
    <p class="tips">
        ツールチップ内のマクロを評価するとプログラムの状態が変更されることがあるため、慎重に実行するようにしてください。たとえば、<tt>i++</tt>に展開されるマクロを評価すると、<tt>i</tt>が増分されます。
    </p>

    <h3>マクロの評価でのウォッチの使用</h3>
    <p>
        次の図のように、デバッガ・ウォッチでマクロを使用することが可能です。<br>
    </p>
    <p>
       <img SRC="../../../images_www/articles/73/cnd/macros/macro-debugging-watches.png" alt="マクロのデバッグ・ウォッチ" class="b-all margin-around">
 </p>
    <p class="tips">
        ウォッチ内のマクロを評価するとプログラムの状態が変わる可能性があるため、慎重に評価してください。たとえば、<tt>i++</tt>に展開されるマクロを評価すると、<tt>i</tt>が増分されます。
    </p>
    <h2>関連項目</h2>
   <p>NetBeans IDEでのC/C++/Fortranを使用した開発に関する詳細な記事は、<a href="https://netbeans.org/kb/trails/cnd.html">C/C++の学習</a>を参照してください。</p>
   
    <div class="feedback-box"><a href="mailto:users@cnd.netbeans.org?subject=Feedback:%20Exploring%20Macros%20in%20C/C++%20Projects%20-%20NetBeans%20IDE%207.4%20Tutorial">このチュートリアルに関するご意見をお寄せください</a></div>

</body>
</html>
